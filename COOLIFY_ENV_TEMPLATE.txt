# ════════════════════════════════════════════════════════════════════════════════
# AUTOLEADS PRODUCTION ENVIRONMENT VARIABLES
# ════════════════════════════════════════════════════════════════════════════════
# Copy these variables to Coolify Dashboard → Environment Variables
# Replace <PLACEHOLDERS> with actual values where indicated
# Mark sensitive variables as "Secret" in Coolify
# ════════════════════════════════════════════════════════════════════════════════

# ════════════════════════════════════════════════════════════════════════════════
# CRITICAL - REQUIRED VARIABLES
# ════════════════════════════════════════════════════════════════════════════════
# Application will NOT start without these variables configured

# Database Configuration
# Mark as SECRET in Coolify (click eye icon)
DATABASE_URL="postgresql://postgres:6LP0Ojegy7IUU6kaX9lLkmZRUiAdAUNOltWyL3LegfYGR6rPQtB4DUSVqjdA78ES@107.155.75.50:5986/auto-lumiku"

# Security - JWT Authentication
# ⚠️ IMPORTANT: Change this value using generated secret from generate-production-secrets.sh
# Mark as SECRET in Coolify (click eye icon)
JWT_SECRET="e4322ded430c65d60cfbaf0d622dfab310c81d334b46f0fccf6db78ed605fd78"
JWT_EXPIRY_HOURS="24"

# Application Environment
NODE_ENV="production"
APP_PORT="3000"
APP_URL="https://auto.lumiku.com"

# CORS Security
# Only allow requests from these domains
ALLOWED_ORIGINS="https://auto.lumiku.com,https://admin.lumiku.com"


# ════════════════════════════════════════════════════════════════════════════════
# RECOMMENDED VARIABLES
# ════════════════════════════════════════════════════════════════════════════════
# These improve functionality and should be configured

# File Storage Configuration
UPLOAD_DIR="/app/uploads"
MAX_FILE_SIZE_MB="10"
ALLOWED_IMAGE_TYPES="jpg,jpeg,png,webp"

# Logging Configuration
LOG_LEVEL="info"

# Rate Limiting (Protection against abuse)
RATE_LIMIT_WINDOW_MS="60000"
RATE_LIMIT_MAX_REQUESTS="100"
RATE_LIMIT_BOT_MAX_MESSAGES="10"


# ════════════════════════════════════════════════════════════════════════════════
# OPTIONAL - EXTERNAL SERVICES
# ════════════════════════════════════════════════════════════════════════════════
# Only configure if you're using these services

# WhatsApp Integration (Fonnte Service)
# Uncomment and configure if using WhatsApp bot functionality
# FONNTE_API_URL="https://api.fonnte.com"
# FONNTE_API_TOKEN="<YOUR_FONNTE_TOKEN_HERE>"

# AI Integration (Google Gemini Pro)
# Uncomment and configure if using AI chatbot features
# Mark GEMINI_API_KEY as SECRET in Coolify
# GEMINI_API_KEY="<YOUR_GEMINI_API_KEY_HERE>"
# GEMINI_API_URL="https://generativelanguage.googleapis.com/v1"
# GEMINI_MODEL="gemini-pro"

# Error Tracking (Sentry)
# Uncomment and configure if using Sentry for error monitoring
# Mark as SECRET in Coolify
# SENTRY_DSN="<YOUR_SENTRY_DSN_HERE>"

# Analytics
# Uncomment and configure if using Google Analytics
# GA_TRACKING_ID="<YOUR_GA_ID_HERE>"

# Session Storage (Redis)
# Uncomment and configure if implementing Redis session storage
# Mark as SECRET in Coolify
# REDIS_URL="redis://<user>:<password>@<host>:<port>"

# Performance Tuning
# MAX_CONNECTIONS="10"


# ════════════════════════════════════════════════════════════════════════════════
# SETUP INSTRUCTIONS
# ════════════════════════════════════════════════════════════════════════════════

# Step 1: Generate Production Secrets
# ------------------------------------------------------------------------------
# Run the secret generation script to create cryptographically secure secrets:
#
#   ssh root@cf.avolut.com
#   cd /path/to/project
#   bash scripts/generate-production-secrets.sh
#
# Or manually generate using OpenSSL:
#
#   openssl rand -hex 32
#
# Copy the generated JWT_SECRET and paste it above (line 22)

# Step 2: Update Placeholders
# ------------------------------------------------------------------------------
# - Review all variables above
# - Replace any <PLACEHOLDERS> with your actual values
# - Remove comment markers (#) from optional services you want to enable

# Step 3: Configure in Coolify
# ------------------------------------------------------------------------------
# 1. Log in to Coolify: https://cf.avolut.com
# 2. Navigate to your application: b8sc48s8s0c4w00008k808w8
# 3. Click "Environment Variables" tab
# 4. Click "Add Variable" for each variable above
# 5. Paste Name and Value for each variable
# 6. Mark sensitive variables as "Secret":
#    - JWT_SECRET (CRITICAL)
#    - DATABASE_URL (CRITICAL)
#    - FONNTE_API_TOKEN (if used)
#    - GEMINI_API_KEY (if used)
#    - SENTRY_DSN (if used)
#    - REDIS_URL (if used)

# Step 4: Save and Restart
# ------------------------------------------------------------------------------
# 1. Click "Save" button
# 2. Click "Restart" button (NOT redeploy)
# 3. Wait 30 seconds for application to restart
# 4. Verify with: curl https://auto.lumiku.com/health

# Step 5: Verify Configuration
# ------------------------------------------------------------------------------
# Check logs to ensure all variables loaded correctly:
#
#   ssh root@cf.avolut.com "docker logs b8sc48s8s0c4w00008k808w8 --tail 50"
#
# Look for:
#   ✓ Loading environment variables...
#   ✓ Environment: production
#   ✓ Database: Connected
#   ✓ Starting AutoLeads application...


# ════════════════════════════════════════════════════════════════════════════════
# SECURITY BEST PRACTICES
# ════════════════════════════════════════════════════════════════════════════════

# ⚠️ DO:
# - Use cryptographically random secrets (64+ characters)
# - Mark all sensitive variables as "Secret" in Coolify
# - Use strong database passwords (20+ characters, mixed case, numbers, symbols)
# - Restrict ALLOWED_ORIGINS to only your production domains
# - Regularly rotate secrets (every 90 days minimum)
# - Keep this file out of git (add to .gitignore)

# ⚠️ DON'T:
# - Commit .env files with real secrets to git
# - Share secrets via email or insecure channels
# - Use weak or predictable passwords
# - Allow wildcard (*) in ALLOWED_ORIGINS
# - Reuse secrets across environments (dev/staging/prod)
# - Store secrets in plain text files on servers


# ════════════════════════════════════════════════════════════════════════════════
# VARIABLE REFERENCE
# ════════════════════════════════════════════════════════════════════════════════

# DATABASE_URL
#   Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
#   Purpose: PostgreSQL connection string for Prisma ORM
#   Security: MUST be marked as Secret in Coolify

# JWT_SECRET
#   Format: 64-character hexadecimal string
#   Purpose: Signs JWT tokens for authentication
#   Security: MUST be cryptographically random and secret
#   Generation: openssl rand -hex 32

# JWT_EXPIRY_HOURS
#   Format: Number (hours)
#   Purpose: How long JWT tokens remain valid
#   Default: 24 hours
#   Recommendation: 7 days for user convenience, 1 hour for high-security

# NODE_ENV
#   Format: "production" | "development" | "staging"
#   Purpose: Controls environment-specific behavior
#   Production: MUST be set to "production"

# APP_PORT
#   Format: Number (port)
#   Purpose: Internal port the application listens on
#   Default: 3000
#   Note: Coolify handles external port mapping

# APP_URL
#   Format: Full URL with protocol
#   Purpose: Used for generating absolute URLs in emails/webhooks
#   Example: https://auto.lumiku.com

# ALLOWED_ORIGINS
#   Format: Comma-separated list of URLs (no spaces)
#   Purpose: CORS policy - controls which domains can make API requests
#   Example: https://auto.lumiku.com,https://admin.lumiku.com
#   Security: NEVER use "*" in production

# UPLOAD_DIR
#   Format: Absolute path
#   Purpose: Directory for storing uploaded images
#   Default: /app/uploads
#   Note: Must match Coolify volume mapping

# MAX_FILE_SIZE_MB
#   Format: Number (megabytes)
#   Purpose: Maximum allowed file upload size
#   Default: 10 MB
#   Recommendation: 5-20 MB depending on use case

# LOG_LEVEL
#   Format: "debug" | "info" | "warn" | "error"
#   Purpose: Controls logging verbosity
#   Production: "info" or "warn"
#   Debugging: "debug"


# ════════════════════════════════════════════════════════════════════════════════
# TROUBLESHOOTING
# ════════════════════════════════════════════════════════════════════════════════

# Issue: Application won't start
# Solution: Check all CRITICAL variables are set and valid

# Issue: Database connection fails
# Solution: Verify DATABASE_URL format and credentials

# Issue: JWT authentication fails
# Solution: Ensure JWT_SECRET is set and matches across all instances

# Issue: CORS errors in browser console
# Solution: Add your frontend domain to ALLOWED_ORIGINS

# Issue: File uploads fail
# Solution: Check UPLOAD_DIR exists and has correct permissions (755)

# Issue: Images disappear after restart
# Solution: Verify Coolify volume is mounted correctly


# ════════════════════════════════════════════════════════════════════════════════
# VERSION INFORMATION
# ════════════════════════════════════════════════════════════════════════════════
# Template Version: 1.0.0
# Last Updated: 2025-10-24
# Compatible With: AutoLeads v1.x
# Coolify Version: 4.x
# ════════════════════════════════════════════════════════════════════════════════
