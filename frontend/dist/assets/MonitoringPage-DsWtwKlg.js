import{c as x,b as W,r,j as e,A as F,T as k}from"./index-ClNmCw7p.js";import{A as M}from"./AnalyticsChart-CMWW-mRf.js";import{R as S}from"./refresh-cw-Bh4xVWkh.js";import{M as j}from"./message-square-CISvD0H6.js";import{T as o,C}from"./triangle-alert-D7R5kbgJ.js";import{C as H}from"./clock-Bgv1fdHG.js";import{M as O}from"./LineChart-0g-vu1lZ.js";import{C as V}from"./circle-x-D8m8mPI3.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],R=x("cpu",G);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],T=x("database",X);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],g=x("hard-drive",J);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],U=x("server",K);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Y=x("wifi",Q);function ie(){const{apiCall:m}=W(),[i,$]=r.useState("health"),[a,A]=r.useState(null),[n,L]=r.useState(null),[d,I]=r.useState(null),[b,D]=r.useState([]),[N,f]=r.useState(!0),[y,w]=r.useState(null),[u,_]=r.useState(!0);r.useEffect(()=>{h();let s;return u&&(s=setInterval(h,3e4)),()=>{s&&clearInterval(s)}},[i,u]);const h=async()=>{try{f(!0),w(null);const[s,t,l,c]=await Promise.all([m("/monitoring/health"),m("/monitoring/whatsapp"),m("/monitoring/storage"),m("/monitoring/logs?limit=50")]);s?.success&&A(s.data),t?.success&&L(t.data),l?.success&&I(l.data),c?.success&&D(c.data.items||[])}catch(s){w("Failed to load monitoring data"),console.error("Monitoring data loading error:",s)}finally{f(!1)}},p=s=>{switch(s){case"healthy":return"text-green-400";case"degraded":return"text-yellow-400";case"down":return"text-red-400";default:return"text-slate-400"}},z=s=>{switch(s){case"healthy":return"bg-green-400/10";case"degraded":return"bg-yellow-400/10";case"down":return"bg-red-400/10";default:return"bg-slate-700/10"}},v=s=>{switch(s){case"healthy":return C;case"degraded":return o;case"down":return V;default:return O}},E=s=>{const t=Math.floor(s/86400),l=Math.floor(s%86400/3600),c=Math.floor(s%3600/60);return t>0?`${t}d ${l}h ${c}m`:l>0?`${l}h ${c}m`:`${c}m`},B=[{name:"00:00",cpu:45,memory:62,disk:38,network:25},{name:"04:00",cpu:38,memory:58,disk:37,network:18},{name:"08:00",cpu:72,memory:78,disk:41,network:65},{name:"12:00",cpu:85,memory:82,disk:44,network:78},{name:"16:00",cpu:68,memory:75,disk:42,network:58},{name:"20:00",cpu:52,memory:68,disk:39,network:42}],q=[{name:"Mon",messages:245,success:98.2},{name:"Tue",messages:312,success:97.8},{name:"Wed",messages:289,success:99.1},{name:"Thu",messages:356,success:96.5},{name:"Fri",messages:423,success:97.2},{name:"Sat",messages:198,success:98.8},{name:"Sun",messages:167,success:99.4}],P=s=>{switch(s){case"database":return T;case"api":return U;case"whatsapp":return j;case"storage":return g;case"cache":return R;default:return U}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"System Monitoring"}),e.jsx("p",{className:"text-slate-400",children:"Real-time system health and performance metrics"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-slate-300",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:s=>_(s.target.checked),className:"rounded border-slate-600 bg-slate-700 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"Auto Refresh"})]}),e.jsxs("button",{onClick:h,disabled:N,className:"px-4 py-2 text-slate-300 hover:text-white hover:bg-slate-700 rounded-lg transition-colors flex items-center space-x-2 disabled:opacity-50",children:[e.jsx(S,{className:`w-4 h-4 ${N?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]})]})]}),a&&e.jsx("div",{className:`
          border rounded-xl p-6
          ${z(a.status)}
          border-${a.status==="healthy"?"green":a.status==="degraded"?"yellow":"red"}-800/50
        `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[(()=>{const s=v(a.status);return e.jsx(s,{className:`w-8 h-8 ${p(a.status)}`})})(),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-white",children:["System Status: ",a.status.toUpperCase()]}),e.jsxs("p",{className:"text-slate-400 text-sm",children:["Last checked: ",new Date(a.timestamp).toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Uptime"}),e.jsx("p",{className:"text-white font-medium",children:E(a.performance.uptime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Response Time"}),e.jsxs("p",{className:"text-white font-medium",children:[a.performance.avgResponseTime,"ms"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Error Rate"}),e.jsxs("p",{className:"text-white font-medium",children:[a.performance.errorRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Request Rate"}),e.jsxs("p",{className:"text-white font-medium",children:[a.performance.requestRate,"/s"]})]})]})]})}),e.jsx("div",{className:"flex border-b border-slate-700",children:[{id:"health",label:"Service Health",icon:F},{id:"performance",label:"Performance",icon:k},{id:"whatsapp",label:"WhatsApp Bot",icon:j},{id:"storage",label:"Storage",icon:g},{id:"logs",label:"Error Logs",icon:o}].map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>$(s.id),className:`
                flex items-center space-x-2 px-6 py-3 text-sm font-medium transition-colors
                ${i===s.id?"text-blue-400 border-b-2 border-blue-400 bg-slate-700/50":"text-slate-400 hover:text-white hover:bg-slate-700/30"}
              `,children:[e.jsx(t,{className:"w-4 h-4"}),e.jsx("span",{children:s.label})]},s.id)})}),i==="health"&&a&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(a.services).map(([s,t])=>{const l=P(s);return e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(l,{className:"w-6 h-6 text-slate-400"}),e.jsx("h3",{className:"text-white font-medium capitalize",children:s})]}),(()=>{const c=v(t.status);return e.jsx(c,{className:`w-5 h-5 ${p(t.status)}`})})()]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400 text-sm",children:"Status"}),e.jsx("span",{className:`text-sm font-medium ${p(t.status)}`,children:t.status.toUpperCase()})]}),t.responseTime&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400 text-sm",children:"Response Time"}),e.jsxs("span",{className:"text-white text-sm",children:[t.responseTime,"ms"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400 text-sm",children:"Last Check"}),e.jsx("span",{className:"text-white text-sm",children:new Date(t.lastCheck).toLocaleTimeString()})]}),t.error&&e.jsx("div",{className:"mt-3 p-2 bg-red-900/20 border border-red-800/50 rounded",children:e.jsx("p",{className:"text-red-400 text-xs",children:t.error})})]})]},s)})}),i==="performance"&&a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(R,{className:"w-8 h-8 text-blue-400"}),e.jsxs("span",{className:"text-blue-400 text-2xl font-bold",children:[a.resources.cpuUsage,"%"]})]}),e.jsx("p",{className:"text-slate-400",children:"CPU Usage"})]}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(T,{className:"w-8 h-8 text-green-400"}),e.jsxs("span",{className:"text-green-400 text-2xl font-bold",children:[a.resources.memoryUsage,"%"]})]}),e.jsx("p",{className:"text-slate-400",children:"Memory Usage"})]}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(g,{className:"w-8 h-8 text-yellow-400"}),e.jsxs("span",{className:"text-yellow-400 text-2xl font-bold",children:[a.resources.diskUsage,"%"]})]}),e.jsx("p",{className:"text-slate-400",children:"Disk Usage"})]}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Y,{className:"w-8 h-8 text-purple-400"}),e.jsxs("span",{className:"text-purple-400 text-2xl font-bold",children:[a.resources.networkIO,"MB/s"]})]}),e.jsx("p",{className:"text-slate-400",children:"Network I/O"})]})]}),e.jsx(M,{type:"area",title:"Resource Usage Trends",subtitle:"Last 24 hours",data:B,series:[{key:"cpu",name:"CPU %",color:"#3b82f6"},{key:"memory",name:"Memory %",color:"#10b981"},{key:"disk",name:"Disk %",color:"#f59e0b"}],height:300})]}),i==="whatsapp"&&n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(j,{className:"w-8 h-8 text-green-400"}),e.jsx("span",{className:"text-green-400 text-2xl font-bold",children:n.totalMessages})]}),e.jsx("p",{className:"text-slate-400",children:"Total Messages"})]}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(k,{className:"w-8 h-8 text-blue-400"}),e.jsxs("span",{className:"text-blue-400 text-2xl font-bold",children:[n.successRate,"%"]})]}),e.jsx("p",{className:"text-slate-400",children:"Success Rate"})]}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(H,{className:"w-8 h-8 text-yellow-400"}),e.jsxs("span",{className:"text-yellow-400 text-2xl font-bold",children:[n.averageResponseTime,"s"]})]}),e.jsx("p",{className:"text-slate-400",children:"Avg Response Time"})]}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(o,{className:"w-8 h-8 text-red-400"}),e.jsx("span",{className:"text-red-400 text-2xl font-bold",children:n.errorCount})]}),e.jsx("p",{className:"text-slate-400",children:"Error Count"})]})]}),e.jsx(M,{type:"bar",title:"WhatsApp Message Volume",subtitle:"Daily message count and success rates",data:q,series:[{key:"messages",name:"Messages",color:"#25d366"},{key:"success",name:"Success Rate %",color:"#128c7e"}],height:300}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Commands"}),e.jsx("div",{className:"space-y-3",children:n.topCommands.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-slate-400 text-sm w-6",children:["#",t+1]}),e.jsx("code",{className:"text-white font-mono",children:s.command})]}),e.jsxs("span",{className:"text-blue-400 font-medium",children:[s.count," uses"]})]},s.command))})]})]}),i==="storage"&&d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Storage Usage"}),e.jsxs("span",{className:"text-blue-400 text-xl font-bold",children:[(d.totalUsage/1024/1024/1024).toFixed(2)," GB"]})]}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-4 mb-6",children:e.jsx("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-500",style:{width:`${Math.min(d.totalUsage/(100*1024*1024*1024)*100,100)}%`}})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.fileTypes.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[e.jsx("span",{className:"text-white",children:s.type.toUpperCase()}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-blue-400 font-medium",children:[(s.size/1024/1024).toFixed(1)," MB"]}),e.jsxs("p",{className:"text-slate-500 text-xs",children:[s.count," files"]})]})]},s.type))})]}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Storage by Tenant"}),e.jsx("div",{className:"space-y-3",children:d.tenantUsage.slice(0,10).map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white",children:s.tenantName}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-blue-400 font-medium",children:[(s.usage/1024/1024).toFixed(1)," MB"]}),e.jsxs("p",{className:"text-slate-500 text-xs",children:[s.fileCount," files"]})]})]},s.tenantId))})]})]}),i==="logs"&&e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Recent Error Logs"}),e.jsxs("button",{onClick:h,className:"px-4 py-2 text-slate-300 hover:text-white hover:bg-slate-700 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh Logs"})]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:b.length>0?b.map((s,t)=>e.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(o,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-red-400 font-medium",children:s.level}),e.jsx("span",{className:"text-slate-500 text-sm",children:new Date(s.timestamp).toLocaleString()})]}),e.jsx("p",{className:"text-white font-mono text-sm",children:s.message}),s.stack&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-slate-400 text-sm cursor-pointer",children:"Stack Trace"}),e.jsx("pre",{className:"mt-2 text-slate-500 text-xs overflow-x-auto",children:s.stack})]})]})})},t)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(C,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),e.jsx("p",{className:"text-green-400 font-medium",children:"No errors detected"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"System is running smoothly"})]})})]}),y&&e.jsx("div",{className:"bg-red-900/20 border border-red-800/50 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(o,{className:"w-5 h-5 text-red-400"}),e.jsx("p",{className:"text-red-400",children:y})]})})]})}export{ie as default};
