import{c as h,u as R,b as L,r as d,j as e,B as C,T as M,d as _}from"./index-Cu-C8ibM.js";import{R as Z}from"./refresh-cw-DhpQ2tMO.js";import{C as O,T as U}from"./triangle-alert-CjAbUGrQ.js";import{C as V}from"./circle-x-BgwMFnel.js";import{E as z}from"./eye-Yc7BM1xb.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],J=h("ellipsis-vertical",D);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],I=h("funnel",q);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],S=h("plus",G);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],W=h("square-pen",H);function ae(){const x=R(),A=L(),m=localStorage.getItem("super_admin_token"),i=(()=>{const t=A.pathname;return t.includes("/create")?"create":t.includes("/edit")?"edit":t.includes("/theme")?"theme":t.includes("/analytics")?"analytics":"list"})(),[c,u]=d.useState([]),[j,f]=d.useState(!0),[k,v]=d.useState(null),[a,l]=d.useState({search:"",status:"",plan:"",sortBy:"name",sortOrder:"asc",page:1,limit:12}),[r,p]=d.useState({total:0,page:1,limit:12,totalPages:0}),[n,y]=d.useState([]),[N,P]=d.useState(!1),g=()=>[{id:1,name:"AutoLeads Motors",slug:"autoleads-motors",subdomain:"autoleads",customDomain:"auto.lumiku.com",logoUrl:"/assets/logo.png",primaryColor:"#FF5722",secondaryColor:"#000000",phone:"+6281234567890",whatsappNumber:"+6281234567890",whatsappBotEnabled:!0,whatsappStatus:"connected",email:"info@autoleads.com",address:"Jl. Sudirman No. 123",city:"Jakarta",plan:"growth",status:"active",trialEndsAt:"2024-01-15T00:00:00Z",planStartedAt:"2024-01-15T00:00:00Z",planExpiresAt:"2025-01-15T00:00:00Z",createdAt:"2024-01-15T10:30:00Z",updatedAt:"2025-01-30T15:45:00Z",totalCars:4,totalLeads:6,totalUsers:3,conversionRate:85.5,monthlyRevenue:15e5},{id:2,name:"PrimaMobil",slug:"primamobil",subdomain:"prima",customDomain:null,logoUrl:null,primaryColor:"#2563eb",secondaryColor:"#1e40af",phone:"+6282345678901",whatsappNumber:"+6282345678901",whatsappBotEnabled:!0,whatsappStatus:"connected",email:"contact@primamobil.com",address:"Jl. Thamrin No. 456",city:"Jakarta",plan:"starter",status:"active",trialEndsAt:"2024-02-01T00:00:00Z",planStartedAt:"2024-02-01T00:00:00Z",planExpiresAt:"2025-02-01T00:00:00Z",createdAt:"2024-02-01T09:15:00Z",updatedAt:"2025-01-28T11:20:00Z",totalCars:3,totalLeads:4,totalUsers:2,conversionRate:75,monthlyRevenue:75e4}],b=async()=>{if(m)try{f(!0),v(null);const t=new URLSearchParams({search:a.search,status:a.status,plan:a.plan,sortBy:a.sortBy,sortOrder:a.sortOrder,page:a.page.toString(),limit:a.limit.toString()}),s=await fetch(`/api/super-admin/tenants?${t}`,{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(s.ok){const o=await s.json();u(o.tenants||g()),p(o.pagination||{total:g().length,page:1,limit:12,totalPages:1})}else{const o=g();u(o),p({total:o.length,page:1,limit:12,totalPages:1})}}catch(t){console.error("Failed to fetch tenants:",t),v("Failed to load tenants");const s=g();u(s),p({total:s.length,page:1,limit:12,totalPages:1})}finally{f(!1)}};d.useEffect(()=>{i==="list"&&b()},[a,i]);const w=()=>{x("/super-admin/tenants/create")},E=t=>{x(`/super-admin/tenants/${t}/edit`)},$=t=>{x(`/super-admin/tenants/${t}`)},B=t=>{x(`/super-admin/tenants/${t}/theme`)},F=(t,s)=>{y(s?[...n,t]:n.filter(o=>o!==t))},T=async t=>{if(n.length===0){alert("Please select tenants first");return}if(!(t==="delete"&&!confirm(`Are you sure you want to delete ${n.length} tenant(s)?`)))try{(await fetch("/api/super-admin/tenants/bulk",{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({action:t,tenantIds:n})})).ok?(b(),y([])):alert(`Failed to ${t} tenants`)}catch(s){console.error(`Failed to ${t} tenants:`,s),alert(`Failed to ${t} tenants`)}};return i!=="list"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{onClick:()=>x("/super-admin/tenants"),className:"flex items-center text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white",children:"← Back to Tenants"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:[i==="create"&&"Create New Tenant",i==="edit"&&"Edit Tenant",i==="theme"&&"Theme Settings",i==="analytics"&&"Tenant Analytics"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This view is under construction. Please check back later."})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Tenants Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage all showroom tenants and their configurations"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>b(),className:"flex items-center px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:w,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Add Tenant"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(C,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Tenants"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(O,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.filter(t=>t.status==="active").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(U,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Trial"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.filter(t=>t.status==="trial").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(M,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Rp ",c.reduce((t,s)=>t+(s.monthlyRevenue||0),0).toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search tenants...",value:a.search,onChange:t=>l({...a,search:t.target.value,page:1}),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),e.jsxs("button",{onClick:()=>P(!N),className:"flex items-center px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),n.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.length," selected"]}),e.jsx("button",{onClick:()=>T("suspend"),className:"px-3 py-1 text-sm bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200 dark:bg-yellow-900 dark:text-yellow-200",children:"Suspend"}),e.jsx("button",{onClick:()=>T("delete"),className:"px-3 py-1 text-sm bg-red-100 text-red-800 rounded hover:bg-red-200 dark:bg-red-900 dark:text-red-200",children:"Delete"})]})]}),N&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("select",{value:a.status,onChange:t=>l({...a,status:t.target.value,page:1}),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"trial",children:"Trial"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"expired",children:"Expired"})]}),e.jsxs("select",{value:a.plan,onChange:t=>l({...a,plan:t.target.value,page:1}),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Plans"}),e.jsx("option",{value:"trial",children:"Trial"}),e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"starter",children:"Starter"}),e.jsx("option",{value:"growth",children:"Growth"}),e.jsx("option",{value:"pro",children:"Pro"})]}),e.jsxs("select",{value:a.sortBy,onChange:t=>l({...a,sortBy:t.target.value,page:1}),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"createdAt",children:"Created Date"}),e.jsx("option",{value:"plan",children:"Plan"}),e.jsx("option",{value:"status",children:"Status"})]}),e.jsxs("select",{value:a.sortOrder,onChange:t=>l({...a,sortOrder:t.target.value,page:1}),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"asc",children:"Ascending"}),e.jsx("option",{value:"desc",children:"Descending"})]})]})]}),k&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsx("span",{className:"text-red-800",children:k})]})}),j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(t=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.includes(t.id),onChange:s=>F(t.id,s.target.checked),className:"mr-3"}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-white font-bold text-lg",style:{backgroundColor:t.primaryColor},children:t.name.charAt(0)}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.subdomain,".lumiku.com"]})]})]}),e.jsx("div",{className:"relative",children:e.jsx("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(J,{className:"w-4 h-4 text-gray-500"})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(tenant.status)}",children:t.status}),e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPlanColor(tenant.plan)}",children:t.plan})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.totalCars}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Cars"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.totalLeads}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Leads"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[t.conversionRate,"%"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Conv."})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.whatsappStatus==="connected"?"bg-green-400":t.whatsappStatus==="disconnected"?"bg-yellow-400":"bg-red-400"}`}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:["WhatsApp ",t.whatsappStatus]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>$(t.id),className:"flex-1 flex items-center justify-center px-3 py-2 text-sm bg-blue-50 text-blue-600 rounded hover:bg-blue-100 dark:bg-blue-900 dark:text-blue-400",children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),"View"]}),e.jsxs("button",{onClick:()=>E(t.id),className:"flex-1 flex items-center justify-center px-3 py-2 text-sm bg-gray-50 text-gray-600 rounded hover:bg-gray-100 dark:bg-gray-700 dark:text-gray-400",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>B(t.id),className:"flex-1 flex items-center justify-center px-3 py-2 text-sm bg-purple-50 text-purple-600 rounded hover:bg-purple-100 dark:bg-purple-900 dark:text-purple-400",children:[e.jsx(Palette,{className:"w-3 h-3 mr-1"}),"Theme"]})]})]})]})},t.id))}),c.length===0&&!j&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No tenants found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Get started by creating your first tenant."}),e.jsxs("button",{onClick:w,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mx-auto",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Add Tenant"]})]}),r.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",(r.page-1)*r.limit+1," to"," ",Math.min(r.page*r.limit,r.total)," of"," ",r.total," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>l({...a,page:r.page-1}),disabled:r.page===1,className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed dark:text-gray-300",children:"Previous"}),Array.from({length:r.totalPages},(t,s)=>s+1).map(t=>e.jsx("button",{onClick:()=>l({...a,page:t}),className:`px-3 py-1 text-sm border rounded ${t===r.page?"bg-blue-500 text-white border-blue-500":"border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-gray-300"}`,children:t},t)),e.jsx("button",{onClick:()=>l({...a,page:r.page+1}),disabled:r.page===r.totalPages,className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed dark:text-gray-300",children:"Next"})]})]})]})]})}export{ae as default};
